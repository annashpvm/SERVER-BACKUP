<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>TreeGrid Example</title>

        <!-- ext css includes -->
          <link rel="stylesheet" type="text/css" href="/ext-3.4.1/resources/css/ext-all.css" />
        <link rel="stylesheet" type="text/css" href="/ext-3.4.1/examples/ux/treegrid/treegrid.css" rel="stylesheet" />
        
        <!-- ext javascript includes -->
        <script type="text/javascript" src="/ext-3.4.1/adapter/ext/ext-base-debug.js"></script>
        <script type="text/javascript" src="/ext-3.4.1/ext-all-debug.js"></script>
        
        <script type="text/javascript" src="/ext-3.4.1/examples/ux/treegrid/TreeGridSorter.js"></script>
        <script type="text/javascript" src="/ext-3.4.1/examples/ux/treegrid/TreeGridColumnResizer.js"></script>
        <script type="text/javascript" src="/ext-3.4.1/examples/ux/treegrid/TreeGridNodeUI.js"></script>
        <script type="text/javascript" src="/ext-3.4.1/examples/ux/treegrid/TreeGridLoader.js"></script>
        <script type="text/javascript" src="/ext-3.4.1/examples/ux/treegrid/TreeGridColumns.js"></script>
        <script type="text/javascript" src="/ext-3.4.1/examples/ux/treegrid/TreeGrid.js"></script>
       
 
    </head>

    <body style="padding: 50px;"></body>

<body>
<script type="text/javascript">

Ext.onReady(function() {
    Ext.QuickTips.init();


var GetModuleListDatastore = new Ext.data.DataStore({
      id: 'GetModuleListDatastore',
      autoLoad : true,
      proxy: new Ext.data.HttpProxy({
                url: 'Clsgridtest.php',      // File to connect to
                method: 'POST'
            }),
            baseParams:{task:"loadDetails"}, // this parameter asks for listing
      reader: new Ext.data.JsonReader({
                  // we tell the datastore where to get his data from
        root: 'results',
        totalProperty: 'total',
        id: 'id'
      },[
     
   {name:'cust_ref',type:'string'},
      {name:'invh_no',type:'int'},
      {name:'invh_date' },
      {name:'invh_totwt',type:'float'},
      {name:'invh_netamt',type:'float'}   


      ]
      
      
      ),
      sortInfo: {field: 'cust_ref', direction: 'ASC'},
            groupField: 'cust_ref'
});




    var tree = new Ext.ux.tree.TreeGrid({
        title: 'Customer List',
        width: 900,
        height: 500,
        renderTo: Ext.getBody(),
        enableDD: true,

        columns:[{
            header: 'Task',
            dataIndex: 'task',
            width: 230
        },{
            header: 'Duration',
            width: 100,
            dataIndex: 'duration',
            align: 'center',
            sortType: 'asFloat',
            tpl: new Ext.XTemplate('{duration:this.formatHours}', {
                formatHours: function(v) {
                    if(v < 1) {
                        return Math.round(v * 60) + ' mins';
                    } else if (Math.floor(v) !== v) {
                        var min = v - Math.floor(v);
                        return Math.floor(v) + 'h ' + Math.round(min * 60) + 'm';
                    } else {
                        return v + ' hour' + (v === 1 ? '' : 's');
                    }
                }
            })
        },{
            header: 'Assigned To',
            width: 150,
            dataIndex: 'user'
        }],

        dataUrl: 'treegrid-data.json',

        ],
 
        loader: new Ext.tree.TreeLoader({
            store :GetModuleListDatastore,

            uiProviders:{
                'col': Ext.ux.tree.ColumnNodeUI
            }
        }),


    });

 //   tree.getRootNode().reload();

});
</script>

<div id="grid-example"></div>
</body
</html>
